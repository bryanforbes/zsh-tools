# AGENTS Guide

- Dependencies: `pnpm install`; Python: `uv sync` (Python 3.12â€“3.14), Rust/Go per toolchains.
- Lint JS: `pnpm lint`; Format JS: `pnpm exec prettier -w .`.
- Lint/format Python: `uv run ruff check . && uv run ruff format .`; Types: `uv run basedpyright`.
- All tests: `pnpm -r test` (delegates to tree-sitter-zsh).
- Single grammar test: `pnpm exec tree-sitter test -f "<name|path>"` in `tree-sitter-zsh/`.
- Single Node test: `node --test --test-name-pattern="<name>" tree-sitter-zsh/bindings/node/binding_test.js`.
- Rust tests: `(cd tree-sitter-zsh && cargo test)` (single: append `test_can_load_grammar`).
- Go tests: `(cd tree-sitter-zsh && go test ./bindings/go -run TestCanLoadGrammar)`.
- Python tests: `(cd tree-sitter-zsh/bindings/python && python -m unittest tests.test_binding.TestLanguage.test_can_load_grammar)`.
- Build C lib: `make -C tree-sitter-zsh`; WASM: `pnpm exec tree-sitter build --wasm`; Rust: `(cd tree-sitter-zsh && cargo build)`.
- EditorConfig: UTF-8/LF; default 2 spaces; C/Rust/Python/Swift 4; Go/Makefile tabs.
- JS/TS: ESM; `checkJs` enabled; JSDoc for types; Prettier single quotes; ESLint flat (`@eslint/js` + treesitter for `grammar.js`).
- Python: Strict Pyright 3.13 target; always `from __future__ import annotations` first; 88 cols; single quotes.
- Imports: absolute only (no implicit relatives); sorted/stabilized by Ruff isort; combine `as` imports.
- Types/naming: JS camelCase, classes PascalCase; Python snake_case, classes PascalCase; C/Rust constants UPPER_SNAKE.
- Errors: be specific; avoid broad except; prefer explicit error paths and tests asserting failures.
- ESLint ignore: everything under `tree-sitter-zsh/**` except `grammar.js` uses treesitter config.
- Node/CLI: use `pnpm exec <tool>` to access local CLIs (e.g., `tree-sitter`).
- Cursor/Copilot: no repo-specific rules found.
