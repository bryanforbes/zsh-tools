[tasks."generate:parser"]
description = "Generate the tree-sitter parser"
sources = ['grammar.js']
outputs = ['src/parser.c']
run = 'tree-sitter generate'

[tasks."build:parser"]
description = "Build the tree-sitter parser"
depends = ':generate:parser'
run = 'tree-sitter build'
sources = ['src/parser.c']
outputs = ['zsh.dylib']

[tasks."test:node"]
description = "Run node tests"
run = 'pnpm test'

[tasks."test:python"]
description = "Run python tests"
run = 'python -m unittest discover -v -s bindings/python/tests'

[tasks."test:grammar"]
description = "Test grammar against corpus"
depends = ':build:parser'
run = 'tree-sitter test'
